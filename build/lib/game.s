
;;; gcc for m6809 : Feb 15 2016 21:40:10
;;; 4.3.6 (gcc6809)
;;; ABI version 1
;;; -mint8
	.module	game.c
	.globl _MAX_LEVELS
	.area .text
_MAX_LEVELS:
	.byte	5
	.globl _waveData
_waveData:
	.byte	1
	.byte	1
	.byte	1
	.byte	0
	.byte	-100
	.byte	50
	.byte	0
	.byte	-1
	.byte	10
	.byte	5
	.word	0	;skip space 28
	.word	0	;skip space 26
	.word	0	;skip space 24
	.word	0	;skip space 22
	.word	0	;skip space 20
	.word	0	;skip space 18
	.word	0	;skip space 16
	.word	0	;skip space 14
	.word	0	;skip space 12
	.word	0	;skip space 10
	.word	0	;skip space 8
	.word	0	;skip space 6
	.word	0	;skip space 4
	.word	0	;skip space 2
	.word	0	;skip space 72
	.word	0	;skip space 70
	.word	0	;skip space 68
	.word	0	;skip space 66
	.word	0	;skip space 64
	.word	0	;skip space 62
	.word	0	;skip space 60
	.word	0	;skip space 58
	.word	0	;skip space 56
	.word	0	;skip space 54
	.word	0	;skip space 52
	.word	0	;skip space 50
	.word	0	;skip space 48
	.word	0	;skip space 46
	.word	0	;skip space 44
	.word	0	;skip space 42
	.word	0	;skip space 40
	.word	0	;skip space 38
	.word	0	;skip space 36
	.word	0	;skip space 34
	.word	0	;skip space 32
	.word	0	;skip space 30
	.word	0	;skip space 28
	.word	0	;skip space 26
	.word	0	;skip space 24
	.word	0	;skip space 22
	.word	0	;skip space 20
	.word	0	;skip space 18
	.word	0	;skip space 16
	.word	0	;skip space 14
	.word	0	;skip space 12
	.word	0	;skip space 10
	.word	0	;skip space 8
	.word	0	;skip space 6
	.word	0	;skip space 4
	.word	0	;skip space 2
	.byte	2
	.byte	2
	.byte	1
	.byte	0
	.byte	0
	.byte	100
	.byte	0
	.byte	-1
	.byte	10
	.byte	5
	.word	0	;skip space 28
	.word	0	;skip space 26
	.word	0	;skip space 24
	.word	0	;skip space 22
	.word	0	;skip space 20
	.word	0	;skip space 18
	.word	0	;skip space 16
	.word	0	;skip space 14
	.word	0	;skip space 12
	.word	0	;skip space 10
	.word	0	;skip space 8
	.word	0	;skip space 6
	.word	0	;skip space 4
	.word	0	;skip space 2
	.byte	2
	.byte	0
	.byte	100
	.byte	100
	.byte	-1
	.byte	-1
	.byte	10
	.byte	5
	.byte	0
	.byte	-100
	.byte	-100
	.byte	2
	.byte	2
	.byte	10
	.byte	5
	.word	0	;skip space 21
	.word	0	;skip space 19
	.word	0	;skip space 17
	.word	0	;skip space 15
	.word	0	;skip space 13
	.word	0	;skip space 11
	.word	0	;skip space 9
	.word	0	;skip space 7
	.word	0	;skip space 5
	.word	0	;skip space 3
	.byte	0	;skip space
	.word	0	;skip space 36
	.word	0	;skip space 34
	.word	0	;skip space 32
	.word	0	;skip space 30
	.word	0	;skip space 28
	.word	0	;skip space 26
	.word	0	;skip space 24
	.word	0	;skip space 22
	.word	0	;skip space 20
	.word	0	;skip space 18
	.word	0	;skip space 16
	.word	0	;skip space 14
	.word	0	;skip space 12
	.word	0	;skip space 10
	.word	0	;skip space 8
	.word	0	;skip space 6
	.word	0	;skip space 4
	.word	0	;skip space 2
	.byte	3
	.byte	3
	.byte	3
	.byte	0
	.byte	100
	.byte	100
	.byte	-1
	.byte	-1
	.byte	10
	.byte	5
	.byte	0
	.byte	0
	.byte	100
	.byte	0
	.byte	-1
	.byte	10
	.byte	5
	.byte	0
	.byte	100
	.byte	0
	.byte	-1
	.byte	0
	.byte	10
	.byte	5
	.word	0	;skip space 14
	.word	0	;skip space 12
	.word	0	;skip space 10
	.word	0	;skip space 8
	.word	0	;skip space 6
	.word	0	;skip space 4
	.word	0	;skip space 2
	.byte	1
	.byte	0
	.byte	100
	.byte	100
	.byte	-1
	.byte	-1
	.byte	10
	.byte	5
	.word	0	;skip space 28
	.word	0	;skip space 26
	.word	0	;skip space 24
	.word	0	;skip space 22
	.word	0	;skip space 20
	.word	0	;skip space 18
	.word	0	;skip space 16
	.word	0	;skip space 14
	.word	0	;skip space 12
	.word	0	;skip space 10
	.word	0	;skip space 8
	.word	0	;skip space 6
	.word	0	;skip space 4
	.word	0	;skip space 2
	.byte	3
	.byte	0
	.byte	-100
	.byte	50
	.byte	2
	.byte	-1
	.byte	50
	.byte	5
	.byte	0
	.byte	100
	.byte	0
	.byte	-1
	.byte	0
	.byte	50
	.byte	5
	.byte	0
	.byte	-100
	.byte	0
	.byte	1
	.byte	0
	.byte	50
	.byte	5
	.word	0	;skip space 14
	.word	0	;skip space 12
	.word	0	;skip space 10
	.word	0	;skip space 8
	.word	0	;skip space 6
	.word	0	;skip space 4
	.word	0	;skip space 2
	.byte	4
	.byte	3
	.byte	3
	.byte	0
	.byte	100
	.byte	100
	.byte	-1
	.byte	-1
	.byte	10
	.byte	5
	.byte	0
	.byte	0
	.byte	100
	.byte	0
	.byte	-1
	.byte	10
	.byte	5
	.byte	0
	.byte	100
	.byte	0
	.byte	-1
	.byte	0
	.byte	10
	.byte	5
	.word	0	;skip space 14
	.word	0	;skip space 12
	.word	0	;skip space 10
	.word	0	;skip space 8
	.word	0	;skip space 6
	.word	0	;skip space 4
	.word	0	;skip space 2
	.byte	4
	.byte	0
	.byte	100
	.byte	100
	.byte	-1
	.byte	-1
	.byte	10
	.byte	5
	.byte	0
	.byte	50
	.byte	100
	.byte	-1
	.byte	-2
	.byte	10
	.byte	5
	.byte	0
	.byte	0
	.byte	100
	.byte	0
	.byte	-1
	.byte	10
	.byte	5
	.byte	0
	.byte	100
	.byte	0
	.byte	-1
	.byte	0
	.byte	10
	.byte	5
	.word	0	;skip space 7
	.word	0	;skip space 5
	.word	0	;skip space 3
	.byte	0	;skip space
	.byte	5
	.byte	0
	.byte	-100
	.byte	50
	.byte	2
	.byte	-1
	.byte	50
	.byte	10
	.byte	0
	.byte	100
	.byte	0
	.byte	-1
	.byte	0
	.byte	50
	.byte	10
	.byte	0
	.byte	-100
	.byte	0
	.byte	1
	.byte	0
	.byte	50
	.byte	10
	.byte	0
	.byte	100
	.byte	0
	.byte	-2
	.byte	0
	.byte	50
	.byte	10
	.byte	0
	.byte	-50
	.byte	-100
	.byte	1
	.byte	2
	.byte	50
	.byte	10
	.byte	5
	.byte	3
	.byte	4
	.byte	0
	.byte	-100
	.byte	-100
	.byte	1
	.byte	1
	.byte	10
	.byte	5
	.byte	0
	.byte	-100
	.byte	100
	.byte	1
	.byte	-1
	.byte	10
	.byte	5
	.byte	0
	.byte	100
	.byte	-100
	.byte	-1
	.byte	1
	.byte	10
	.byte	5
	.byte	0
	.byte	100
	.byte	100
	.byte	-1
	.byte	-1
	.byte	10
	.byte	5
	.word	0	;skip space 7
	.word	0	;skip space 5
	.word	0	;skip space 3
	.byte	0	;skip space
	.byte	4
	.byte	0
	.byte	0
	.byte	100
	.byte	0
	.byte	-1
	.byte	10
	.byte	5
	.byte	0
	.byte	0
	.byte	-100
	.byte	0
	.byte	1
	.byte	10
	.byte	5
	.byte	0
	.byte	100
	.byte	0
	.byte	-1
	.byte	0
	.byte	10
	.byte	5
	.byte	0
	.byte	-100
	.byte	0
	.byte	1
	.byte	0
	.byte	10
	.byte	5
	.word	0	;skip space 7
	.word	0	;skip space 5
	.word	0	;skip space 3
	.byte	0	;skip space
	.byte	4
	.byte	0
	.byte	-50
	.byte	-100
	.byte	1
	.byte	2
	.byte	50
	.byte	5
	.byte	0
	.byte	-50
	.byte	100
	.byte	1
	.byte	-2
	.byte	50
	.byte	5
	.byte	0
	.byte	50
	.byte	-100
	.byte	-1
	.byte	2
	.byte	50
	.byte	5
	.byte	0
	.byte	50
	.byte	100
	.byte	-1
	.byte	-2
	.byte	50
	.byte	5
	.word	0	;skip space 7
	.word	0	;skip space 5
	.word	0	;skip space 3
	.byte	0	;skip space
	.globl _current_game
	.area .data
_current_game:
	.word	0	;skip space 5
	.word	0	;skip space 3
	.byte	0	;skip space
	.area .text
	.globl _game_init
_game_init:
	ldb	#1
	stb	_Vec_Joy_Mux_1_X
	ldb	#3
	stb	_Vec_Joy_Mux_1_Y
	clr	_Vec_Joy_Mux_2_X
	clr	_Vec_Joy_Mux_2_Y
	ldb	#3
	stb	_current_game+2
	ldb	#2
	stb	_current_game+3
	clr	_current_game+4
	clr	_current_wave
	clr	_current_wave+1
	clr	_current_game
	rts
	.globl _game_play
_game_play:
	leas	-1,s
	jsr	_init_player
	jsr	_init_tower
	jsr	_wave_init
	jsr	_menu_init
	jmp	L4
L10:
	ldb	_current_game
	; tstb	; optimization 6
	bne	L5
	jsr	_wave_play
	ldb	_current_wave+3
	cmpb	#2	;cmpqi:
	bne	L6
	ldb	_current_wave
	incb
	stb	_current_wave
	clr	_current_wave+1
	ldb	#1
	stb	_current_game
	ldb	_current_wave
	stb	,s
	ldb	_MAX_LEVELS
	cmpb	,s	;cmpqi:(R)
	bhi	L4
	jsr	_game_win
	bra	L4
L6:
	ldb	_current_wave+3
	cmpb	#3	;cmpqi:
	bne	L9
	ldb	_current_wave+1
	incb
	stb	_current_wave+1
	jsr	_wave_init
	bra	L4
L9:
	ldb	_current_game+2
	decb
	stb	_current_game+2
	; ldb	_current_game+2	; optimization 5
	tstb
	bne	L4
	jsr	_game_over
	bra	L4
L5:
	ldb	_current_game
	cmpb	#1	;cmpqi:
	bne	L4
	clr	_Menu
	jsr	_menu_open
	clr	_current_game
	jsr	_wave_init
L4:
	ldb	_current_game+2
	; tstb	; optimization 6
	lbne	L10
	leas	1,s
	rts
LC0:
	.byte	0x47
	.byte	0x41
	.byte	0x4D
	.byte	0x45
	.byte	0x20
	.byte	0x4F
	.byte	0x56
	.byte	0x45
	.byte	0x52
	.byte	0x80
	.byte	0x00
	.globl _game_over
_game_over:
	pshs	y
	leas	-9,s
	leax	,s
	jsr	___Clear_Score
	ldb	_current_game+4
	stb	8,s
	leax	,s
	ldb	8,s
	jsr	__Add_Score_a
	leay	,s
	ldx	#_Vec_High_Score
	pshs	x
	leax	,y
	jsr	__New_High_Score
	leas	2,s
	ldb	#-106
	stb	7,s
L14:
	jsr	_Sync
	jsr	___Intensity_5F
	ldb	#-64
	stb	,-s
	ldx	#LC0
	clrb
	jsr	_print_string
	leas	1,s
	jsr	___Read_Btns
	dec	7,s
	; tst	7,s	; optimization 1
	beq	L15
	ldb	_Vec_Buttons
	andb	#8
	tstb
	beq	L14
L15:
	leas	9,s
	puls	y,pc
LC1:
	.byte	0x59
	.byte	0x4F
	.byte	0x55
	.byte	0x20
	.byte	0x57
	.byte	0x49
	.byte	0x4E
	.byte	0x80
	.byte	0x00
	.globl _game_win
_game_win:
	pshs	y
	leas	-9,s
	leax	,s
	jsr	___Clear_Score
	ldb	_current_game+4
	stb	8,s
	leax	,s
	ldb	8,s
	jsr	__Add_Score_a
	leay	,s
	ldx	#_Vec_High_Score
	pshs	x
	leax	,y
	jsr	__New_High_Score
	leas	2,s
	ldb	#-106
	stb	7,s
L18:
	jsr	_Sync
	jsr	___Intensity_5F
	ldb	#-64
	stb	,-s
	ldx	#LC1
	clrb
	jsr	_print_string
	leas	1,s
	jsr	___Read_Btns
	dec	7,s
	; tst	7,s	; optimization 1
	beq	L19
	ldb	_Vec_Buttons
	andb	#8
	tstb
	beq	L18
L19:
	leas	9,s
	puls	y,pc
	.globl _game
_game:
	leas	-1,s
	ldb	#1
	stb	,-s
	ldb	#2
	jsr	__Select_Game
	leas	1,s
	ldb	_Vec_Num_Game
	stb	_current_game+1
	ldb	_Vec_Btn_State
	andb	#8
	tstb
	beq	L21
	jsr	_game_init
	jsr	_game_play
	clr	,s
	bra	L22
L21:
	ldb	#-1
	stb	,s
L22:
	ldb	,s
	leas	1,s
	rts
	.area .bss
	.globl	_bullets
_bullets:	.blkb	60
